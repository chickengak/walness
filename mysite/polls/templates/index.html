{% load static %}
<!DOCTYPE HTML>
<!--
    TXT by HTML5 UP
    html5up.net | @ajlkn
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
        <title>Walness</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="stylesheet" href="{% static 'css/main.css' %}" />
        <style>
            @font-face {
                font-family: 'NPSfontBold';
                src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2310@1.0/NPSfontBold.woff2')
                     format('woff2');
                font-weight: 700;
                font-style: normal;
            }
            
            /* 원하는 요소에 폰트 적용 */
            h1 a, h2 a, h3 a, h4 a, h5 a, h6 a,
            h1, h2, h3, h4, h5, h6, p, a {
                font-family: 'NPSfontBold', sans-serif;
            }
            
            .col-12 div {
                font-family: 'NPSfontBold', sans-serif;
            }
            .large-text {
                font-size: larger; /* 또는 다른 원하는 크기로 변경 */
            }

            /* 플로팅 광고 스타일 */
            .banner-ad {
                position: relative;
                width: 1200px;
                height: auto; /* 세로는 자동으로 조정되도록 설정 */
                /*overflow-x: scroll; /* 수평 스크롤을 활성화하여 넘치는 내용을 스크롤할 수 있도록 함 */
                white-space: nowrap; /* 내용이 줄 바꿈되지 않도록 설정하여 가로로 긴 내용을 표시함 */
                /*background-color: #f0f0f0; /* 광고 배경색 조정 */
                /*border: 1px solid #ccc; /* 광고 테두리 스타일 */
                /*border-radius: 5px; /* 광고 테두리 둥글게 */
                /*padding: 10px; /* 광고 내부 여백 조정 */
                /*box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); /* 그림자 효과 추가 */
                /*z-index: 9999; /* 다른 요소들보다 위에 나타나도록 조정 */
            }
            
            /* 닫기 버튼 스타일 */
            .banner-ad .close-btn {
                position: absolute;
                top: 5px;
                right: 5px;
                cursor: pointer;
                color: #888;
                z-index: 999; /* 이미지 위로 위치하도록 z-index 설정 */
            }

            /* 이미지 스타일 */
            .banner-ad img {
                display: inline-block; /* 이미지가 인라인 요소로 표시되도록 함 */
                width: 100%; /* 이미지를 부모 요소에 맞게 조정 */
                height: auto; /* 가로 비율에 맞춰 세로 비율 조정 */
                /* margin-top: 30px;  이미지 아래 여백 추가 */
            }
            /*이미지 업로드 창*/
            .addImage {
                width: 200px;
                height: 150px;
                background-color: lightgray;
                border-radius: 20px 20px / 20px 20px;
                overflow: hidden;
                margin: 0px 10px 10px 0px;
            }
    
            .inputImg {
                width: 200px;
                height: 150px;
                display: block;
                margin: 0 auto;
                margin-bottom: 50px;
            }

            .showing-inputted-image {
                flex: 1; /* Flex 아이템들이 컨테이너 공간을 균등하게 차지하도록 설정 */
                width: 50%;
                height:auto;
                max-width: 350px; /* 각 이미지의 최대 너비를 컨테이너의 50%로 설정 */
                padding: 0 10px; /* 이미지 사이에 간격을 추가 */
                box-sizing: border-box; /* 패딩과 보더가 너비에 포함되도록 설정 */
            }
            .showing-inputted-image img {
                max-width: 100%; /* 이미지가 컨테이너를 넘어가지 않도록 설정 */
                height: auto; /* 이미지 비율을 유지하면서 너비에 맞춰 높이 조정 */
            }
            .image-container {
                display: flex;
                justify-content: center; /* 이미지들을 가로 방향으로 중앙 정렬 */
                align-items: center; /* 이미지들을 세로 방향으로 중앙 정렬 */
            }
            .info-container {
                display: flex;
                justify-content: space-between;
            }
            
            .info-container > div {
                width: 30%;
                background-color: #f3f3f3;
                border-radius: 10px;
                padding: 10px;
            }

            .info-container ul {
                margin-top: 5px;
                padding-left: 15px;
                list-style-type: none;
                margin-bottom: 0; /* 아래쪽 마진 제거 */
            }
        </style>
        
    </head>
    <body class="homepage is-preload">        

        <div id="page-wrapper">

            <!-- Header -->
                <header id="header">
                    <div class="logo container">
                        <div>
                            <h1><a href="index.html" id="logo">왈니스</a></h1>
                            <p>왈니스</p>
                        </div>
                    </div>
                </header>

            <!-- Nav -->
                <nav id="nav">
                    <ul>
                        <li class="current"><a href="{% url 'index' %}">Home</a></li>
                        <li><a href="{% url 'left_sidebar_view' %}">왈니스를 소개합니다</a></li>
                        <li><a href="{% url 'no_sidebar_view' %}">왈니스 동물 병원</a></li>
                    </ul>
                </nav>

            <!-- Banner -->
                <section id="banner" >
                    <div class="content" style="height: 600px;">
                        <h2>Walness🐾</h2>
                        <p>무심코 발견한 우리 아이 눈의 이상 징후,  왈니스로 한번 체크해 보세요 !</p>
                        <div class="how-to-container">
                            <p class = "how-to-container">왈니스를 이용하기 위해 사진을 업로드해 주세요.</p>
                            <p class = "how-to-container">사진의 중앙에 우리 아이 눈이 올 수 있도록 위치하고 사진을 찍은 뒤, 업로드하면 완료! </p>
                        </div>                       
                        <!-- 이미지 첨부할 공간 -->
                        <form class="inputImg" action="{% url 'createform' %}" method="post" enctype="multipart/form-data">
                            <select name="pet_type" style="font-size: 10px; height: 30px;">
                                <option value="dog">강아지</option>
                                <option value="cat">고양이</option>
                            </select>
                            <div class="addImage" id="image-show"> <!-- 이미지 띄울 공간 --> </div>
                            {% csrf_token %}
                            <div>
                                <input type="file" name="imgfile" id="imgfile" accept="image/*" onchange="loadFile(this)">
                            </div>
                            
                            <input type="submit" value="제출" onclick="showAd()">
                        </form>
                        <!-- <a href="#main" class="button scrolly">Submit</a> -->
                    </div>
                </section>


            <!-- Main -->
                <section id="main">
                    <div class="container">
                        <div class="row gtr-200">
                            <div class="col-12">

                                <!-- Highlight -->
                                <section class="box highlight" style="text-align: center;">
                                    <ul class="special">
                                        {% if product.imgfile %}
                                        <div class="image-container" id="result-section" style="margin-top: 20px; margin-bottom: 20px; outline: none;" tabindex="0">
                                            
                                            <div class="showing-inputted-image">
                                                <img src="{{ product.imgfile.url }}" width="100%">
                                            </div>
                                            <div class="showing-inputted-image">
                                                <img src="/media/results/grad_cam_result.png" width="100%">
                                            </div>
                                        </div>

                                        <div class="highlight-box">
                                            {% if pet_type == 'dog' %}
                                                {% if disease == 0 %}
                                                <strong class="large-text"><span style="color: red;">[ 백내장 ] </span></strong>이 의심됩니다. 
                                                <div>신뢰도: {{ accuracy }}%</div>                                    
                                                &nbsp;
                                                <div class="info-container">
                                                    <div>
                                                        <h3>🔍백내장이란?</h3>
                                                        <p> 
                                                            강아지 백내장은 눈의 수정체가 흐려지거나 불투명해져 시력에 장애를 주는 질환입니다. 
                                                        </p>
                                                    </div>
                                                    <div>
                                                        <h3>🔍원인은?</h3>
                                                        <ul style="list-style-type: none;">
                                                            <li>유전적 소인</li>
                                                            <li>노화</li>
                                                            <li>당뇨병</li>
                                                            <li>눈 부상 또는 염증</li>
                                                        </ul>
                                                    </div>
                                                    <div>
                                                        <h3>🔍증상은?</h3>
                                                        <ul style="list-style-type: none;">
                                                            <li>혼탁하고 불투명한 눈</li>
                                                            <li>물체에 부딪히는 등 활동 제약</li>
                                                            <li>눈을 가늘게 뜨거나 문지르는 행동</li>
                                                            <li>눈 주위의 홍조, 붓기 또는 분비물</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <br>
                                                <div> 신속한 병원 방문 및 진료를 권장합니다. </div>

                                                {% elif disease == 1 %}
                                                <strong class="large-text"><span style="color: red;">[ 결막염 ] </span></strong>이 의심됩니다. 
                                                <div>신뢰도: {{ accuracy }}%</div>
                                                &nbsp;
                                                <div class="info-container">
                                                    <div>
                                                        <h3>🔍결막염이란?</h3>
                                                        <p> 
                                                            강아지 결막염은 안구와 안검을 결합하는 점막 조직에 염증이 발생하는 질병입니다. 
                                                        </p>
                                                    </div>
                                                    <div>
                                                        <h3>🔍원인은?</h3>
                                                        <ul style="list-style-type: none;">
                                                            <li>세균, 바이러스, 기생충 등에 의한 감염</li>
                                                            <li>환경적 요인에 의한 알레르기 반응</li>
                                                            <li>먼지, 연기, 화학물질 등에 의한 자극</li>
                                                            <li>외상에 의한 결막 조직의 물리적 손상</li>
                                                            <li>만성 안구건조증 등의 안구 질환</li>
                                                        </ul>
                                                    </div>
                                                    <div>
                                                        <h3>🔍증상은?</h3>
                                                        <ul style="list-style-type: none;">
                                                            <li>눈을 가려워하거나 찡그림</li>
                                                            <li>흰자 부분 빨갛게 충혈됨</li>
                                                            <li>눈 주변이 부어오름</li>
                                                            <li>눈물, 눈곱 양이 늘어남</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <br>
                                                <div> 신속한 병원 방문 및 진료를 권장합니다. </div>
                                                {% elif disease == 2 %}
                                                <div>
                                                    질병의 양상을 보이지 않는 <strong><span style="color: blue;">건강한 상태</span></strong>입니다👍   신뢰도: {{ accuracy }}%
                                                </div>
                                                {% else %}
                                                <div>
                                                    오류. 다시 시도하세요.
                                                </div> 
                                                {% endif %}
                                            {% elif pet_type == 'cat' %}
                                                {% if disease == 1 %}
                                                <strong class="large-text"><span style="color: red;">[ 결막염 ] </span></strong>이 의심됩니다. 
                                                <div>신뢰도: {{ accuracy }}%</div>                                    
                                                &nbsp;
                                                <div class="info-container">
                                                    <div>
                                                        <h3>🔍결막염이란?</h3>
                                                        <p> 
                                                            고양이 결막염은 눈꺼풀의 얇은 막인 결막에 염증이 생기는 질병입니다. 
                                                        </p>
                                                    </div>
                                                    <div>
                                                        <h3>🔍원인은?</h3>
                                                        <ul style="list-style-type: none;">
                                                            <li>허피스, 칼리시 바이러스, 박테리아 등의 감염</li>
                                                            <li>알레르기</li>
                                                            <li>유전적 원인</li>
                                                            <li>환경 변화</li>
                                                        </ul>
                                                    </div>
                                                    <div>
                                                        <h3>🔍증상은?</h3>
                                                        <ul style="list-style-type: none;">
                                                            <li>눈을 뜨는 것을 불편해함</li>
                                                            <li>흰자위 부분이 빨갛게 충혈됨</li>
                                                            <li>눈 주변이 부어있음</li>
                                                            <li>눈물, 눈곱이 많이 남</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <br>
                                                <div> 신속한 병원 방문 및 진료를 권장합니다. </div>

                                                {% elif disease == 0 %}
                                                <div>
                                                    질병의 양상을 보이지 않는 <strong><span style="color: blue;">건강한 상태</span></strong>입니다👍
                                                </div>
                                                {% else %}
                                                <div>
                                                    오류. 다시 시도하세요.
                                                </div> 
                                                {% endif %}
                                            {% endif %}                                       
                                        </div>
                                        
                    
                                        {% endif %}
                                        <ul><a href="{% url 'no_sidebar_view' %}" class="button alt large">주위의 동물 병원 찾기</a></ul>
                                    
                                    </ul>
                                    <ul>
                                        {% if product.imgfile %}
                                        <!-- 배너 광고 -->
                                        <div class="banner-ad">
                                            <!-- 닫기 버튼 -->
                                            <span class="close-btn" onclick="document.querySelector('.banner-ad').style.display = 'none'">X</span>
                                            
                                            <!-- 광고 내용 -->
                                            <a href="https://kbinsure-mypet.co.kr/" class="image featured"><img src="{% static 'images/ad01_banner.jpg' %}" alt="" /></a>
                                        </div>
                                        {% else %}
                                        <!-- 배너 광고 -->
                                        <div class="banner-ad" id="banner-ad" style="display: none;">
                                            <ul>
                                                <!-- 분석 로딩 메세지-->
                                                <div class="loading-message" style="display: flex; justify-content: center; align-items: center;">
                                                    <h4>분석 중입니다...</h4>
                                                    <img src="{% static 'images/loading_animation.gif' %}" alt="" style="width: 60px; height: auto; margin-left: 10px;" />
                                                </div>
                                            </ul>
                                            <ul style="position: relative;">
                                                <!-- 닫기 버튼 -->
                                                <span class="close-btn" onclick="closeAd()">X</span>
                                                
                                                <!-- 광고 내용 -->
                                                <a href="https://kbinsure-mypet.co.kr/" id="ad-link" class="image featured"><img src="{% static 'images/ad01_banner.jpg' %}" alt="" /></a>
                                            </ul>
                                        </div>

                                        {% endif %}
                                    </ul>
                                

                            </div>
                                                            
                            <div class="col-12">

                                <!-- Features -->
                                <section class="box features">
                                    <h2 class="major"><span>About Walness</span></h2>
                                    <div>
                                        <div class="row">
                                            <div class="col-3 col-6-medium col-12-small">

                                                <!-- Feature -->
                                                <section class="box feature">
                                                    <a href="#" class="image featured"><img src="{% static 'images/dogey.png' %}" alt="" /></a>
                                                    <h3><a href="#">우리 아이의 눈은 안녕할까?</a></h3>
                                                    <p>
                                                        무한한 행복을 선사해 주는 반려동물들 , 불편한 증상을 보이는데도 무심코 넘어가게 되지는 않나요? 
                                                        시기를 놓치면 되돌리기 힘든 우리 집 반려동물들의 눈 건강, 조기진단으로 미리미리 지켜주세요. 그들의 안녕이 곧 우리의 안녕이니까요 !
                                                    </p>
                                                </section>

                                            </div>
                                            <div class="col-3 col-6-medium col-12-small">

                                                <!-- Feature -->
                                                <section class="box feature">
                                                    <a href="#" class="image featured"><img src="{% static 'images/walness_cam.png' %}" alt="" /></a>
                                                    <h3><a href="#">이렇게 이용해요!</a></h3>
                                                    <p>
                                                        눈에 이상 징후가 보이는 것 같나요 ?  지나치지 말고, 주머니 속 휴대폰으로 찰칵 !  촬영된 사진을 AI 기술을 통해 체크해 보세요. 
                                                        빠르게 분석하고 의심되는 질병을 확인할 수 있습니다.  함께 건강한 삶을 누리기 위한 쉬운 방법, 왈니스와 함께하세요
                                                    </p>
                                                </section>

                                            </div>
                                            <div class="col-3 col-6-medium col-12-small">

                                                <!-- Feature -->
                                                <section class="box feature">
                                                    <a href="#" class="image featured"><img src="{% static 'images/시각화123.png' %}" alt="" /></a>
                                                    <h3><a href="#">이 안과질환은 ...</a></h3>
                                                    <p>
                                                        왈니스는 ResNet이라는 딥러닝 모델을 활용하여 반려동물 안구질환 데이터셋을 학습하고, 이를 기반으로 반려동물의 안구 질환을 예측합니다. 
                                                        약 90%의 정확도를 보이는 모델을 통해 효과적인 예측을 제공할 뿐만 아니라, 이미지의 어떤 부분을 기반으로 예측했는지를 함께 보여줍니다.
                                                    </p>
                                                </section>

                                            </div>
                                            <div class="col-3 col-6-medium col-12-small">

                                                <!-- Feature -->
                                                <section class="box feature">
                                                    <a href="#" class="image featured"><img src="{% static 'images/동물병원지도1.png' %}" alt="" /></a>
                                                    <h3><a href="#">동물 병원은 어디에?</a></h3>
                                                    <p>
                                                        이미 증상을 보이는 반려동물이라면 긴 거리를 이동할수록 더욱 스트레스일 수 있습니다. 
                                                        빠르게 도착할 수 있는 동물 병원도 왈니스에서 확인하세요. 빠른 동물 병원 방문이 큰 병을 막는다 !
                                                    </p>
                                                </section>

                                            </div>
                                            <div class="col-12">
                                                <ul class="actions">
                                                    <li><a href="{% url 'left_sidebar_view' %}" class="button large">왈니스팀 소개</a></li>
                                                    <li><a href="{% url 'no_sidebar_view' %}" class="button alt large">동물 병원 찾기</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                            </div>
                            <div class="col-12">
                            </div>
                        </div>
                    </div>
                </section>

            <!-- Footer -->
                <footer id="footer">
                    <div class="container">
                        <div class="row gtr-200">
                            <div class="col-12">

                                <!-- About -->
                                <section>
                                    <h2 class="major"><span>Walness about?</span></h2>
                                    <p>
                                       저희는 <strong>왈니스</strong>팀 입니다. 최근 반려동물을 키우는 가구가 늘어나고 있고
                                       이러한 사회적 영향을 고려하여, 우리 서비스는 반려동물 보호자들이 시간과 장소에 구애받지 않고, 반려동물의 안구질환을 예측하는 데 목적을 두고 있습니다. :)
                                    </p>
                                 </section>

                            </div>
                            <div class="col-12">

                                <!-- Contact -->
                                    <section>
                                        <h2 class="major"><span>Get in touch</span></h2>
                                        <ul class="contact">
                                            <li><a class="icon brands fa-instagram" href="https://www.instagram.com/yuhengsa?igsh=c2U4ZGQzZWJoYTk0"><span class="label">Instagram</span></a></li>
                                        </ul>
                                    </section>

                            </div>
                        </div>
                    </div>
                </footer>

        </div>

        <!-- Scripts -->
            <script src="{% static 'js/jquery.min.js' %}"></script>
            <script src="{% static 'js/jquery.dropotron.min.js' %}"></script>
            <script src="{% static 'js/jquery.scrolly.min.js' %}"></script>
            <script src="{% static 'js/browser.min.js' %}"></script>
            <script src="{% static 'js/breakpoints.min.js' %}"></script>
            <script src="{% static 'js/util.js' %}"></script>
            <script src="{% static 'js/main.js' %}"></script>
            <script>
                function loadFile(input) {
                    let file = input.files[0]; // 선택파일 가져오기
        
                    let newImage = document.createElement("img"); //새 이미지 태그 생성
        
                    //이미지 source 가져오기
                    newImage.src = URL.createObjectURL(file);
                    newImage.style.width = "100%"; //div에 꽉차게 넣으려고
                    newImage.style.height = "100%";
                    newImage.style.objectFit = "cover"; // div에 넘치지 않고 들어가게
        
                    //이미지를 image-show div에 추가
                    let container = document.getElementById('image-show');
                    container.appendChild(newImage);
                }
            </script>
            <script>
                function showAd() {
                    var ad = document.getElementById("banner-ad");
                    ad.style.display = "block"; // 배너 광고 보이도록 설정
                    var link = document.getElementById("ad-link");
                    link.focus(); // 링크로 포커스 이동
                }
            
                function closeAd() {
                    var ad = document.getElementById("banner-ad");
                    ad.style.display = "none"; // 플로팅 광고 숨김
                }
            </script>
            <script>
                window.onload = function() {
                    // 페이지가 로드되면 결과 부분으로 포커스 이동
                    document.getElementById("result-section").focus();
                };
            </script>

    </body>
</html>